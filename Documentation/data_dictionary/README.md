# UVSD Enrichment Data Dictionary

## Overview
This directory contains the data dictionary for the UVSD (Urban Vehicle Scene Detection) Enrichment project. The data dictionary provides metadata information, column definitions, and data types for all tables in the system.

## Table Structure

### 1. Images Table (`images_table.csv`)
Stores information about tiled images in the dataset.

**Primary Key**: `image_id`
**Relationships**: One-to-many with annotations table
**Source**: Generated from tiling process of original aerial/satellite imagery
**Volume**: Approximately 16,000+ image tiles (train + validation)

### 2. Annotations Table (`annotations_table.csv`)
Contains vehicle detection annotations with bounding boxes and segmentation polygons.

**Primary Key**: `annotation_id`
**Foreign Keys**: `image_id` → images.image_id, `category_id` → categories.category_id
**Source**: Converted from YOLO format labels to COCO JSON format
**Volume**: Approximately 16,000+ annotations (matching CSV results file)

### 3. Categories Table (`categories_table.csv`)
Defines vehicle categories for classification.

**Primary Key**: `category_id`
**Current State**: Single category ("vehicle") with ID 0
**Expandability**: Designed to support multiple vehicle types in future iterations

### 4. Enriched Results Table (`enriched_results_table.csv`)
Stores model-enriched attributes for each vehicle annotation.

**Primary Key**: `result_id`
**Foreign Key**: `annotation_id` → annotations.annotation_id
**Source**: Generated by InternVL2 model inference pipeline
**Volume**: One-to-one mapping with annotations table

## Data Types and Constraints

### Common Data Types:
- **INTEGER**: Sequential identifiers and counts
- **VARCHAR(n)**: Text fields with length limits
- **TEXT**: Unlimited text fields for descriptions
- **FLOAT**: Numerical values with decimal precision
- **BOOLEAN**: True/False values
- **TIMESTAMP**: Date and time values
- **DATE**: Date-only values

### Key Constraints:
1. **Primary Keys**: All tables have auto-incrementing primary keys
2. **Foreign Keys**: Maintain referential integrity between tables
3. **CHECK Constraints**: Validate data ranges (e.g., confidence scores 0-1)
4. **NOT NULL**: Required fields that cannot be empty
5. **UNIQUE**: Ensures uniqueness where required

## Data Validation Rules

### Images Table:
- `width` and `height` must be positive integers (640x640 for tiles)
- `dataset_split` must be either 'train' or 'val'
- `file_name` must follow pattern: `{image_id}_tile_{x}_{y}.jpg`

### Annotations Table:
- `bbox` must be valid JSON array with 4 elements [x, y, width, height]
- `segmentation` must be valid polygon coordinates as flat list
- `area` must be positive float
- `confidence` must be between 0 and 1 (if provided)

### Enriched Results Table:
- `color` must be from predefined color palette
- `angle` must be from predefined viewing angles
- `time_of_day` must be from predefined lighting conditions
- All confidence scores must be between 0 and 1

## Data Relationships Diagram

```
images (1) ────── (many) annotations (1) ────── (1) enriched_results
      │                                            │
      └─────────── (many) categories (1) ─────────┘
```

## Data Quality Metrics

1. **Completeness**: All required fields must be populated
2. **Consistency**: Data types and formats must be uniform
3. **Accuracy**: Annotations must match visual ground truth
4. **Timeliness**: Processing timestamps must be sequential
5. **Validity**: All constraints and business rules must be satisfied

## Usage Notes

1. **CSV Format**: All dictionary files are in CSV format for easy import into databases or Excel
2. **Encoding**: UTF-8 encoding supports special characters
3. **Delimiter**: Comma-separated values with header row
4. **Quoting**: Text fields containing commas are quoted
5. **Line Endings**: Unix-style (LF) line endings

## Future Extensions

1. **Additional Categories**: Support for car types (sedan, SUV, truck, etc.)
2. **Additional Attributes**: Vehicle make/model, license plate detection
3. **Temporal Analysis**: Time-series tracking of vehicle movements
4. **Spatial Analysis**: Geographic coordinates and movement patterns
5. **Quality Scores**: Automated quality assessment metrics